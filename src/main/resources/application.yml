spring:
  application:
    name: stoov

  # 데이터베이스(PostgreSQL) 연결 설정
  datasource:
    url: ${POSTGRES_DB_URL}
    username: ${POSTGRES_USER}
    password: ${POSTGRES_PASSWORD}
    driver-class-name: org.postgresql.Driver

  # JPA 및 Hibernate 설정
  jpa:
    hibernate:
      ddl-auto: update # 개발 단계에서는 update를 사용하고, 운영에서는 validate 또는 none을 권장합니다.
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        default_batch_fetch_size: 100 # LAZY 연관 로딩할 때 최대 100개씩 묶어서 쿼리로 가져오게 하는 옵션
    show-sql: true
  logging: #추가가가
    level:
      org.hibernate.SQL: debug
      org.hibernate.type.descriptor.sql.BasicBinder: trace
server:
  servlet:
    session:
      cookie:
        http-only: true
      timeout: 2h

oauth2:
  google:
    # 환경변수로 오버라이드 가능, 기본값은 기존 ID
    client-id: ${GOOGLE_CLIENT_ID:1039443017272-ddcqnf4elsi7sg60gucpqp7rngp8ci3g.apps.googleusercontent.com}

# AWS S3 설정
s3:
  region: ${S3_REGION}

app:
  cors:
    # 프로필에서 override
    allowed-origins: []

---
spring:
  config:
    activate:
      on-profile: local

server:
  servlet:
    session:
      cookie:
        secure: false
        same-site: lax

app:
  cors:
    allowed-origins:
      - "http://localhost:5173"

---
spring:
  config:
    activate:
      on-profile: prod

server:
  forward-headers-strategy: framework
  servlet:
    session:
      cookie:
        secure: true
        same-site: lax
        domain: .stoo-v.com

app:
  cors:
    allowed-origins:
      - "https://stoo-v.com"
